# Generated by Django 5.2.8 on 2026-01-08 06:41

import accounts.fields
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('accounts', '0001_initial'),
        ('administration', '0001_initial'),
        ('patients', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='DiagnosisType',
            fields=[
                ('diagnosis_type_id', models.AutoField(primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('detail_table', models.CharField(blank=True, max_length=50, null=True)),
            ],
            options={
                'db_table': 'hospital"."diagnosis_types',
            },
        ),
        migrations.CreateModel(
            name='Doctor',
            fields=[
                ('doctor_id', models.AutoField(primary_key=True, serialize=False)),
                ('employee_no', models.CharField(max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('license_no', models.CharField(max_length=50)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('room_number', models.CharField(blank=True, max_length=10, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('department', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='accounts.department')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': '의사',
                'verbose_name_plural': '의사',
                'db_table': 'hospital"."doctor',
            },
        ),
        migrations.CreateModel(
            name='Appointment',
            fields=[
                ('appointment_id', models.AutoField(primary_key=True, serialize=False)),
                ('appointment_date', models.DateField()),
                ('appointment_time', models.TimeField()),
                ('appointment_type', models.CharField(blank=True, max_length=30, null=True)),
                ('status', models.CharField(blank=True, max_length=30, null=True)),
                ('department', models.CharField(blank=True, max_length=100, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('staff', models.ForeignKey(blank=True, db_column='staff_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='administration.administration')),
                ('doctor', models.ForeignKey(blank=True, db_column='doctor_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='doctor.doctor')),
            ],
            options={
                'db_table': 'hospital"."appointments',
            },
        ),
        migrations.CreateModel(
            name='Encounter',
            fields=[
                ('encounter_id', models.AutoField(primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('PLANNED', '계획됨'), ('IN_PROGRESS', '진행중'), ('COMPLETED', '완료'), ('CANCELLED', '취소'), ('ENTERED_IN_ERROR', '오류입력')], default='PLANNED', max_length=30)),
                ('workflow_state', models.CharField(choices=[('REQUESTED', '요청됨'), ('REGISTERED', '접수완료'), ('WAITING_CLINIC', '진료대기'), ('IN_CLINIC', '진료중'), ('WAITING_IMAGING', '촬영대기'), ('IN_IMAGING', '촬영중'), ('COMPLETED', '완료'), ('CANCELLED', '취소')], default='REQUESTED', max_length=30)),
                ('start_time', models.DateTimeField(blank=True, null=True)),
                ('end_time', models.DateTimeField(blank=True, null=True)),
                ('state_entered_at', models.DateTimeField(auto_now_add=True)),
                ('current_location', models.CharField(blank=True, max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('appointment', models.ForeignKey(blank=True, db_column='appointment_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='doctor.appointment')),
            ],
            options={
                'db_table': 'hospital"."encounters',
                'ordering': ['state_entered_at'],
            },
        ),
        migrations.CreateModel(
            name='Patient',
            fields=[
                ('patient_id', models.CharField(max_length=50, primary_key=True, serialize=False)),
                ('sample_id', models.CharField(blank=True, max_length=100, null=True)),
                ('name', models.CharField(max_length=100)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('age', models.IntegerField(blank=True, null=True)),
                ('gender', accounts.fields.GenderField(blank=True, choices=[('M', '남성'), ('F', '여성')], max_length=10, null=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('profile', models.OneToOneField(blank=True, db_column='profile_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='patients.userprofile')),
            ],
            options={
                'db_table': 'hospital"."patient',
            },
        ),
        migrations.CreateModel(
            name='MedicalRecord',
            fields=[
                ('record_id', models.AutoField(primary_key=True, serialize=False)),
                ('clinic_room', models.CharField(blank=True, max_length=20, null=True)),
                ('record_date', models.DateField()),
                ('record_time', models.TimeField()),
                ('record_status', models.CharField(blank=True, choices=[('DRAFT', '작성중'), ('COMPLETED', '완료'), ('AMENDED', '수정됨')], default='DRAFT', max_length=30, null=True)),
                ('department', models.CharField(blank=True, max_length=100, null=True)),
                ('visit_start', models.TimeField(blank=True, null=True)),
                ('visit_end', models.TimeField(blank=True, null=True)),
                ('is_first_visit', models.BooleanField(default=False)),
                ('chief_complaint', models.TextField(blank=True, null=True)),
                ('clinical_notes', models.TextField(blank=True, null=True)),
                ('lab_recorded', models.BooleanField(default=False)),
                ('ct_recorded', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('diagnosis_type', models.ForeignKey(blank=True, db_column='diagnosis_type_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='doctor.diagnosistype')),
                ('doctor', models.ForeignKey(db_column='doctor_id', on_delete=django.db.models.deletion.RESTRICT, to='doctor.doctor')),
                ('encounter', models.ForeignKey(blank=True, db_column='encounter_id', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='medical_records', to='doctor.encounter')),
                ('staff', models.ForeignKey(db_column='staff_id', on_delete=django.db.models.deletion.RESTRICT, to='administration.administration')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."medical_records',
                'ordering': ['-record_date', '-record_time'],
            },
        ),
        migrations.CreateModel(
            name='LabResult',
            fields=[
                ('lab_id', models.AutoField(primary_key=True, serialize=False)),
                ('test_date', models.DateField()),
                ('afp', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('albumin', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('bilirubin_total', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('pt_inr', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('platelet', models.IntegerField(blank=True, null=True)),
                ('creatinine', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('child_pugh_class', models.CharField(blank=True, max_length=1, null=True)),
                ('meld_score', models.IntegerField(blank=True, null=True)),
                ('albi_score', models.DecimalField(blank=True, decimal_places=3, max_digits=5, null=True)),
                ('albi_grade', models.CharField(blank=True, max_length=1, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('measured_at', models.DateTimeField(blank=True, null=True)),
                ('medical_record', models.ForeignKey(blank=True, db_column='record_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='doctor.medicalrecord')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."lab_results',
            },
        ),
        migrations.CreateModel(
            name='LabOrder',
            fields=[
                ('order_id', models.AutoField(primary_key=True, serialize=False)),
                ('order_type', models.CharField(choices=[('BLOOD_LIVER', '간기능 혈액검사'), ('GENOMIC', '유전체 분석')], max_length=20)),
                ('status', models.CharField(choices=[('REQUESTED', '요청됨'), ('IN_PROGRESS', '검사중'), ('COMPLETED', '완료'), ('CANCELLED', '취소')], default='REQUESTED', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('doctor', models.ForeignKey(on_delete=django.db.models.deletion.RESTRICT, to='doctor.doctor')),
                ('encounter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='doctor.encounter')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."lab_orders',
            },
        ),
        migrations.CreateModel(
            name='HCCDiagnosis',
            fields=[
                ('hcc_id', models.AutoField(primary_key=True, serialize=False)),
                ('hcc_diagnosis_date', models.DateField()),
                ('ajcc_stage', models.CharField(blank=True, max_length=10, null=True)),
                ('ajcc_t', models.CharField(blank=True, max_length=10, null=True)),
                ('ajcc_n', models.CharField(blank=True, max_length=10, null=True)),
                ('ajcc_m', models.CharField(blank=True, max_length=10, null=True)),
                ('grade', models.CharField(blank=True, max_length=5, null=True)),
                ('vascular_invasion', models.CharField(blank=True, max_length=20, null=True)),
                ('ishak_score', models.IntegerField(blank=True, null=True)),
                ('hepatic_inflammation', models.CharField(blank=True, max_length=50, null=True)),
                ('ecog_score', models.IntegerField(blank=True, null=True)),
                ('tumor_status', models.CharField(blank=True, max_length=50, null=True)),
                ('measured_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('medical_record', models.ForeignKey(db_column='record_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.medicalrecord')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."hcc_diagnosis',
            },
        ),
        migrations.CreateModel(
            name='GenomicData',
            fields=[
                ('genomic_id', models.AutoField(primary_key=True, serialize=False)),
                ('sample_date', models.DateField(blank=True, null=True)),
                ('pathway_scores', models.JSONField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('measured_at', models.DateTimeField(blank=True, null=True)),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."genomic_data',
            },
        ),
        migrations.AddField(
            model_name='encounter',
            name='patient',
            field=models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient'),
        ),
        migrations.CreateModel(
            name='DoctorToRadiologyOrder',
            fields=[
                ('order_id', models.AutoField(primary_key=True, serialize=False)),
                ('modality', models.CharField(max_length=16)),
                ('body_part', models.CharField(blank=True, max_length=64, null=True)),
                ('order_notes', models.TextField(blank=True, null=True)),
                ('priority', models.CharField(default='ROUTINE', max_length=10)),
                ('status', models.CharField(choices=[('REQUESTED', '요청됨'), ('WAITING', '촬영대기'), ('IN_PROGRESS', '촬영중'), ('COMPLETED', '완료'), ('CANCELLED', '취소')], default='REQUESTED', max_length=20)),
                ('ordered_at', models.DateTimeField(auto_now_add=True)),
                ('scheduled_at', models.DateTimeField(blank=True, null=True)),
                ('study_uid', models.CharField(blank=True, max_length=64, null=True)),
                ('doctor', models.ForeignKey(db_column='doctor_id', on_delete=django.db.models.deletion.RESTRICT, to='doctor.doctor')),
                ('medical_record', models.ForeignKey(blank=True, db_column='record_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='doctor.medicalrecord')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
        ),
        migrations.AddField(
            model_name='appointment',
            name='patient',
            field=models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient'),
        ),
        migrations.CreateModel(
            name='AnthropometricData',
            fields=[
                ('anthro_id', models.AutoField(primary_key=True, serialize=False)),
                ('measured_at', models.DateField(blank=True, null=True)),
                ('height', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('weight', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('bmi', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('is_pregnant', models.BooleanField(default=False)),
                ('smoking_status', models.BooleanField(default=False)),
                ('medical_record', models.ForeignKey(blank=True, db_column='record_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='doctor.medicalrecord')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."anthropometric_data',
            },
        ),
        migrations.CreateModel(
            name='Prescription',
            fields=[
                ('prescription_id', models.AutoField(primary_key=True, serialize=False)),
                ('prescription_date', models.DateField()),
                ('item_seq', models.BigIntegerField()),
                ('medication_name', models.CharField(max_length=200)),
                ('dosage', models.CharField(blank=True, max_length=50, null=True)),
                ('frequency', models.CharField(blank=True, max_length=50, null=True)),
                ('duration_days', models.IntegerField(blank=True, null=True)),
                ('pharmacy_notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('measured_at', models.DateTimeField(blank=True, null=True)),
                ('department', models.ForeignKey(db_column='department_id', on_delete=django.db.models.deletion.RESTRICT, to='accounts.department')),
                ('doctor', models.ForeignKey(db_column='doctor_id', on_delete=django.db.models.deletion.RESTRICT, to='doctor.doctor')),
                ('encounter', models.ForeignKey(db_column='encounter_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.encounter')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."prescriptions',
            },
        ),
        migrations.CreateModel(
            name='Questionnaire',
            fields=[
                ('questionnaire_id', models.AutoField(primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('NOT_STARTED', '미작성'), ('IN_PROGRESS', '작성중'), ('COMPLETED', '완료')], default='NOT_STARTED', max_length=20)),
                ('data', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('encounter', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='questionnaire', to='doctor.encounter')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."questionnaires',
            },
        ),
        migrations.CreateModel(
            name='ScheduleDoctor',
            fields=[
                ('schedule_id', models.AutoField(primary_key=True, serialize=False)),
                ('schedule_date', models.DateField()),
                ('schedule_type', accounts.fields.DoctorScheduleTypeField(choices=[('OUTPATIENT', '외래'), ('SURGERY', '수술'), ('CONFERENCE', '회의'), ('VACATION', '휴가'), ('OTHER', '기타')], max_length=30)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('clinic_room', models.CharField(blank=True, max_length=20, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('is_available', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('doctor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedules', to='doctor.doctor')),
            ],
            options={
                'verbose_name': '의사 일정',
                'verbose_name_plural': '의사 일정',
                'db_table': 'hospital"."schedule_doctor',
                'ordering': ['-schedule_date'],
            },
        ),
        migrations.CreateModel(
            name='VitalData',
            fields=[
                ('vital_id', models.AutoField(primary_key=True, serialize=False)),
                ('measured_at', models.DateField()),
                ('sbp', models.IntegerField(blank=True, null=True)),
                ('dbp', models.IntegerField(blank=True, null=True)),
                ('medical_record', models.ForeignKey(db_column='record_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.medicalrecord')),
                ('patient', models.ForeignKey(db_column='patient_id', on_delete=django.db.models.deletion.CASCADE, to='doctor.patient')),
            ],
            options={
                'db_table': 'hospital"."vital_data',
            },
        ),
    ]
